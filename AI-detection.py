###############################################################################################
#  ______     __                                  __    __                   ______   ______  #
# /      \   /  |                                /  |  /  |                 /      \ /      | #
#/$$$$$$  | _$$ |_     ______   __    __         $$ |  $$ |  ______        /$$$$$$  |$$$$$$/  # 
#$$ \__$$/ / $$   |   /      \ /  |  /  | ______ $$ |  $$ | /      \       $$ |__$$ |  $$ |   # 
#$$      \ $$$$$$/    $$$$$$  |$$ |  $$ |/      |$$ |  $$ |/$$$$$$  |      $$    $$ |  $$ |   # 
# $$$$$$  |  $$ | __  /    $$ |$$ |  $$ |$$$$$$/ $$ |  $$ |$$ |  $$ |      $$$$$$$$ |  $$ |   # 
#/  \__$$ |  $$ |/  |/$$$$$$$ |$$ \__$$ |        $$ \__$$ |$$ |__$$ |      $$ |  $$ | _$$ |_  # 
#$$    $$/   $$  $$/ $$    $$ |$$    $$ |        $$    $$/ $$    $$/       $$ |  $$ |/ $$   | #
# $$$$$$/     $$$$/   $$$$$$$/  $$$$$$$ |         $$$$$$/  $$$$$$$/        $$/   $$/ $$$$$$/  # 
#                              /  \__$$ |                  $$ |                               # 
#                              $$    $$/                   $$ |                               #
#                               $$$$$$/                    $$/                                #
#                                                                                             #  
###############################################################################################
#-----------------------------------------------------------------------------
# ìƒˆë¡œê³ ì¹¨ ì¼ì : 2025.08.10 
# ìˆ˜ì •ì‚¬í•­ : ëª¨ë˜ GUI ë””ìì¸ ì ìš©
#/////////////////////////////////////////////////////
# ìˆ˜ì •ì‚¬í•­ : GUIì½”ë“œ ìµœì¢… êµ¬ì„± / í¸ì˜ì‚¬í•­ êµ¬ì„±ì¶”ê°€ì˜ˆì •
# ì¸ì¦ì°½ ì¶”ê°€, ì‚¬ëŒ ê°ì²´ê°ì§€ì‹œ íŒì—…ì•ŒëŒ ì¶”ê°€ ë° ë³„ë„í´ë”ì— ë³µì‚¬ê¸°ëŠ¥ ì¶”ê°€
# ì§„í–‰ë¥  ì°½ í‘œì‹œ, ê°ì²´íƒì§€ëª¨ë¸ ì¶”ê°€(ì˜ˆì •), ìº¡ì³ë³´ë“œ,ì˜ìƒ ì‚¬ëŒë§Œíƒì§€ ì ìš©
# 25.01.27 ì‹¤ì‹œê°„ì„ íƒì‹œ ì €ì¥ê¸°ëŠ¥ off, ì‚¬ëŒ-ìë™ì°¨ ì„ íƒê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •
# 25.07.05 ì˜¤ë¥˜ìˆ˜ì •, ì‚¬ëŒ,ìë™ì°¨, FPSí‘œì‹œ ì°½ ì¶”ê°€
# 25.08.10 ëª¨ë˜ GUI ë””ìì¸ ì ìš©, Material Design ê¸°ë°˜ ìŠ¤íƒ€ì¼ë§ //
#-----------------------------------------------------------------------------
import sys
import os
from mypackage import gui
import mypackage.check_version as check_version

def run_basic_gui():
    """ê¸°ë³¸ GUI ì‹¤í–‰ (í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°ìš©)"""
    try:
        print("ğŸ”§ ê¸°ë³¸ í˜¸í™˜ ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘...")
        
        from mypackage import start
        from PySide6.QtWidgets import QApplication
        
        app = QApplication.instance()
        if app is None:
            app = QApplication(sys.argv)
        
        # ê¸°ë³¸ ì¸ì¦ ì‹œìŠ¤í…œ ì‚¬ìš©
        if start.authenticate():
            # ì§ì ‘ GUI í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤í™”
            window = gui.Ui_MainWindow()
            window.show()
            sys.exit(app.exec())
        else:
            print("ì¸ì¦ ì‹¤íŒ¨")
            sys.exit(1)
            
    except Exception as e:
        print(f"âŒ ê¸°ë³¸ GUI ì‹¤í–‰ ì‹¤íŒ¨: {e}")
        print("ğŸ’¡ PySide6 ë²„ì „ì„ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”: pip install --upgrade PySide6")
        sys.exit(1)

def main():
    """ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜ - ëª¨ë˜ GUIê°€ ì ìš©ëœ AI ê°ì²´íƒì§€ í”„ë¡œê·¸ë¨"""
    print("ğŸš€ Stay Up AI - ê°ì²´íƒì§€ í”„ë¡œê·¸ë¨ì„ ì‹œì‘í•©ë‹ˆë‹¤...")
    print("ğŸ¨ ìƒˆë¡œìš´ ëª¨ë˜ GUI ë””ìì¸ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!")
    print("=" * 60)
    
    try:
        # ë²„ì „ ì²´í¬ ë¨¼ì € ì‹¤í–‰
        print("ğŸ“‹ ë²„ì „ í™•ì¸ ì¤‘...")
        check_version.main()
        
        print("ğŸ–¥ï¸  ëª¨ë˜ GUI ë¡œë”© ì¤‘...")
        print("âœ¨ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤:")
        print("   â€¢ Material Design ê¸°ë°˜ ì„¸ë ¨ëœ ì¸í„°í˜ì´ìŠ¤")
        print("   â€¢ ì§ê´€ì ì¸ ì•„ì´ì½˜ê³¼ ë²„íŠ¼")
        print("   â€¢ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼")
        print("   â€¢ ì¹´ë“œ í˜•íƒœì˜ ì„¹ì…˜ êµ¬ë¶„")
        print("   â€¢ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ê³¼ ê·¸ë¦¼ì íš¨ê³¼")
        print("=" * 60)
        
        # ë©”ì¸ GUI ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
        try:
            gui.Ui_MainWindow.run_app()
        except AttributeError as attr_error:
            if "WindowFlag" in str(attr_error):
                print("âš ï¸  PySide6 ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œ ê°ì§€ - ê¸°ë³¸ GUIë¡œ ì „í™˜")
                run_basic_gui()
            else:
                raise attr_error
        
    except ImportError as e:
        print(f"âŒ ëª¨ë“ˆ import ì˜¤ë¥˜: {e}")
        print("ğŸ’¡ í•´ê²° ë°©ë²•:")
        print("   1. pip install PySide6 ultralytics opencv-python")
        print("   2. pip install torch torchvision")
        print("   3. í•„ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì´ ëª¨ë‘ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸")
        sys.exit(1)
        
    except Exception as e:
        print(f"âŒ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")
        print("ğŸ’¡ ë¬¸ì˜: tenmoo@naver.com")
        sys.exit(1)

if __name__ == "__main__":
    main()
